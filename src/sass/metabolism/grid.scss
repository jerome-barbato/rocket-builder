$grid-default-space : 0 !default;

$grid-margin : 0 $grid-default-space !default;
$grid-col-padding : 0 $grid-default-space !default;
$grid-row-margin : $grid-default-space*2 !default;
$grid-breakpoint : $media-mobile !default;

@mixin lib-grid {

  .grid {
    display: block; @include clearfix();
    @if variable-exists(grid-margin) { & + & { margin-top: $grid-margin } }
    &--flex {
      .g-row {
        display: flex; flex: 0 1 auto; flex-direction: row; flex-wrap: wrap;
        &--top { align-items: flex-start }
        &--center { align-items: center }
        &--bottom { align-items: flex-end }
      }
      .g-col{
        flex-grow: 1; flex-basis: 0; float: none;
        @for $j from 1 through 12{
          @for $i from 2 through 12{
            @if $j < $i{
              &--#{$j}_#{$i} { flex-basis: ((100%*$j)/$i) }
            }
          }
        }
      }
    }

    &--table {
      display: table; width: 100%; height: 100%;
      &:after{ display: none }
      @media #{$grid-breakpoint} { display: block }
      .g-row {
        display: table-row; height: 100%;
        @media #{$grid-breakpoint} { display: block }
      }
      .g-col{
        display: table-cell; height: 100%; float: none; vertical-align: top;
        @media #{$grid-breakpoint} { display: block }
        &--top { vertical-align: top }
        &--center { vertical-align: middle }
        &--bottom { vertical-align: bottom }
      }
    }
  }

  .g-row {
    @include clearfix(); display: block; position: relative;
    @if variable-exists(grid-row-padding) { padding: $grid-row-padding; }
    @if variable-exists(grid-row-margin) { & + .g-row { margin-top: $grid-row-margin; } }
  }

  .g-col {
    float: left; width: 100%; border-collapse: collapse; display: block; position: relative;
    @media #{$grid-breakpoint} { width: 100% }
    @if variable-exists(grid-col-padding) { padding: $grid-col-padding }
    @for $j from 1 through 12 {
      @for $i from 2 through 12 {
        @if $j < $i{
          &--#{$j}_#{$i} { width: ((100%*$j)/$i) }
          &---#{$j}_#{$i} { margin-left: ((100%*$j)/$i) }
        }
      }
    }
  }
}

@mixin break-grid() { width: 100%; float: none }

@if( index($libraries, 'grid') ) { @include lib-grid }
