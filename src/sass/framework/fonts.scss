$public-path  : '../' !default;

$font_path: '#{$public-path}/font' !default;
$font-families : ();

@each $font in $fonts {

  $family   : nth($font, 1);
  $src      : nth($font, 2);
  $weight   : nth($font, 3);
  $style    : nth($font, 4);
  $stretch  : nth($font, 5);
  $fallback : nth($font, 6);

  @font-face {
    font-family: "#{$family}";
    src: url('#{$font_path}/#{$src}.eot');
    src: url('#{$font_path}/#{$src}.eot?#iefix') format('embedded-opentype'),
    url('#{$font_path}/#{$src}.woff') format('woff'),
    url('#{$font_path}/#{$src}.svg##{$src}') format('svg');
    font-weight: #{$weight};
    font-style: #{$style};
    font-stretch: #{$stretch};
  }

  @if not map-has-key($font-families, to-lower-case($family)){
    $new-font: (to-lower-case($family): '#{$family}, #{$fallback}');
    $font-families : map-merge($font-families, $new-font);
  }
}

// include font with fallback
@mixin font($name) {
  $font : map-get($font-families, to-lower-case($name));
  @if( $font ){
    font-family: unquote($font);
  }
}
